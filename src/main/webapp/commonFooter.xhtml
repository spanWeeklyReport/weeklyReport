<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <h:body>
           <ui:composition>
            <script src="//code.jquery.com/jquery-1.10.2.js"></script>
      <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>  
      <script src="js/jquery.numeric.js" ></script>
      <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.js" ></script>
           <script type="text/javascript">
           //<![CDATA[
           $.noConflict();
              jQuery(document).ready(function($){ 
            	             	
            	  function GetQueryStringParams(sParam)
          		{
          		    var sPageURL = window.location.search.substring(1);
          		    var sURLVariables = sPageURL.split('&');
          		    for (var i = 0; i < sURLVariables.length; i++) 
          		    {
          		        var sParameterName = sURLVariables[i].split('=');
          		        if (sParameterName[0] == sParam) 
          		        {
          		            return sParameterName[1];
          		        }
          		    }
          		}
          		
          		var tech = GetQueryStringParams('tech');
          	//	alert(tech);
          	$(".mname").text(tech);
            	  
            	  
            	  $(".add-butn").click(function(){
                      
            		  $(".risk-type").val($(".risk-type option:first").val());
            		  $(".risk-des").val("");
            		  $(".risk-res").val("");
            		

            		  });
            	 
            	 
            	  
            	  if($("#viewform\\:checkBoxAll").is(":checked")){
             		 $("#viewform\\:week_no").val(0);
             		 $("#viewform\\:week_no").prop('disabled', true);
             		 $(".datepicker").prop('disabled', true);
             		
             	 }
             	 else{
             		
             		  $("#viewform\\:week_no").prop('disabled', false);
             		  $(".datepicker").prop('disabled', false);
             	 }
               
            	  
            	  $("#viewform\\:checkBoxAll").click(function(){
            	    	 if($(this).is(":checked")){
            	    		 $("#viewform\\:week_no").val(0);
            	    		 $("#viewform\\:week_no").prop('disabled', true);
            	    		 $(".datepicker").prop('disabled', true);
            	    		
            	    	 }
            	    	 else{
            	    		
            	    		  $("#viewform\\:week_no").prop('disabled', false);
            	    		  $(".datepicker").prop('disabled', false);
            	    	 }
            	       });
            	  
               //add class to risk table
               $(".order-table tr").addClass('order-table-odd-row');
               
               //hide risk table if empty
               if ($(".order-table-odd-row td").text() == "") {

                $(".order-table-odd-row td").hide();
               }
                     
                                        
              //tabs
	         $(function() {
	               $( "#tabs-1" ).tabs();
	         });
         
	               
        
       //task form validation
       
        $(".fetch").click(function(){
        	          
        	if ($(".sel-p").val() == null)
        	{
        	  alert("Please create a project in this department first");
        	  return false;
        	  
        	}
        	
                	   
                	   if ($(".weeknumber").val() > 52) {
      					 alert("Please enter a valid week range"); 
      					 return false;
      					}
      					else if ($(".weeknumber").val() < 1) {
      						alert("Please enter a valid week range");
      						return false;
      					}
                          
      					else {}
                	   
                	   if ($("#taskform\\:year").val() == 0) {
                		   alert("Please select week using the calender");
                		   return false;
                	   }
                          
                   });
                   
       
        $(".fetch2").click(function(){
        	
        	         if(jQuery(".report-type").val() == 0){
        	        	 
        	        	 alert("Please select report type");
        	        	 return false;
        	         }
	            
        	         if ($(".checkweeks:checked").length > 0) {
        	        	 
        	        	 return true;
        	         }
        	 
                	   if ($(".weeknumber").val() > 52) {
      					 alert("Please enter a valid week range"); 
      					 return false;
      					}
      					else if ($(".weeknumber").val() < 1) {
      						alert("Please enter a valid week range");
      						return false;
      					}
                          
      					else {}
                          
                   });
       
           
               
           $(".s-button").click(function() {
                    //Making all fields required
                    
                                   
                           
                  if ($(".planned").val() == "" || $(".completed").val() == "" || $(".hold").val() == "" || $(".inprogress").val() == "" || $(".count-bill").val() == "" || $(".count-sha").val() == "" || $(".count-billR").val() == "" || $(".count-shaR").val() == "" ||
                    $(".count-projIncB").val() == "" ||  $("..count-projIncSh").val() == "" || $(".count-projdecB").val() == "" ||      $(".count-projDecSh").val() == "" )          {
                                         
                            alert ("You have missed out on filling Task/Resource Details");
                            return false;
                            
                          }
                          
                          else {}
              
              }); //end of task form validation

        //Risk Validation
        
       
                            
          
          //Calculating total fields
           
         var bill_count = $(".count-bill").val();
        var shadow_count = $(".count-sha").val();
        if (bill_count == "" && shadow_count == "" || bill_count == ""  || shadow_count == "" ) { 
              
              $(".total-count").empty();
              
        }
        else {
          var bill_count = parseInt($(".count-bill").val());
        var shadow_count = parseInt($(".count-sha").val());
       
              $(".total-count").text(bill_count+shadow_count);
        }
        
             
        var rescL_bill = $(".count-billR").val();
        var rescL_sha = $(".count-shaR").val();
        
        if (rescL_bill == "" && rescL_sha =="" || rescL_bill == "" || rescL_sha =="") {
              
              $(".total-resource").empty();
              
            }
        else {
        
         var rescL_bill = parseInt($(".count-billR").val());
         var rescL_sha = parseInt($(".count-shaR").val());
         
                      $(".total-resource").text(rescL_bill+rescL_sha);
                      
        }
        
        var PInc_bill = $(".count-projIncB").val();
        var PInc_sha = $(".count-projIncSh").val();
        
        if (PInc_bill == "" && PInc_sha =="" || PInc_bill == "" || PInc_sha =="") {
              
              $(".total-inc").empty();
              
        }
        else {
              
         var PInc_bill = parseInt($(".count-projIncB").val());
         var PInc_sha = parseInt($(".count-projIncSh").val());
        
                      $(".total-inc").text(PInc_bill+PInc_sha);
            
        }
        
        
        var PDec_bill = $(".count-projdecB").val();
        var PDec_sha = $(".count-projDecSh").val();
        
        if (PDec_bill == "" && PDec_sha =="" || PDec_bill == "" || PDec_sha =="" ) {
              
              $(".total-dec").empty();
              
        }
        else {
        
         var PDec_bill = parseInt($(".count-projdecB").val());
         var PDec_sha = parseInt($(".count-projDecSh").val());
         
         $(".total-dec").text(PDec_bill+PDec_sha);
         
        }
         
             
      //Calender
        $('.datepicker').datepicker({
              
              changeMonth: true,
              showOn: 'both',
             showOtherMonths: true,
                 onSelect: function (dateText, inst) {
             var week =  $('.weeknumber').val($.datepicker.iso8601Week(new Date(dateText)));
               var date = $(this).datepicker('getDate'),
               day  = date.getDate(),  
               month = date.getMonth() + 1,              
               year =  date.getFullYear();
                console.log(year);
                getQuator($(".weeknumber").val());
                $('#taskform\\:year').val(year);
             
                  }
            });
        
      //Show Quarter of the year
        getQuator($(".weeknumber").val());
		    function getQuator(week){
		       if ( 1 <= week && week <= 13 ){
		             
		               $("#qtrLabel").html('(Quarter1)');
		              $("#qtrLabel2").html('  (Quarter1)');
		              
		             
		        }
		        else if(14 <= week && week <= 26) {
		             
		               $("#qtrLabel").html('(Quarter2)');
		                $("#qtrLabel2").html('  (Quarter2)');
		        }
		        else if( 27 <= week && week <= 39) {
		             
		               $("#qtrLabel").html('(Quarter3)');
		             $("#qtrLabel2").html('  (Quarter3)');
		        }
		        
		        else if (40 <= week && week <= 52){
		               $("#qtrLabel").html('(Quarter4)');
		             $("#qtrLabel2").html('  (Quarter4)');
		        }
		        else {}
		    }

		    
		    //Only numbers validation       
	        $(".integer").numeric(false, function() { alert("Please enter only numeric values"); this.value = ""; this.focus(); });
         
         
   });
              
            //]]>
         
      </script>
      
                           
           </ui:composition>
    </h:body>
</html>




